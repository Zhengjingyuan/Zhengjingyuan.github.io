<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="google-site-verification" content="TZE0rZyIqLl10trYu3BWBWa1Vmz6HFwhb2OcNEK4u-s" />
     <link rel="shortcut icon" href= /img/favicon.ico >
    <title>
        eniregnat_juy.
    </title>
    <meta name="description" content= 自由之风永远吹拂. >
    <meta name="keywords" content= ZhengJingyuan,eniregnat_juy >
    
<link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>
<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-home
 replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            Flutter|学习笔记
        </p>
        <hr>
    </div>
    <div class="post-content">
        <h1 id="Flutter技术学习"><a href="#Flutter技术学习" class="headerlink" title="Flutter技术学习"></a>Flutter技术学习</h1><h2 id="MVVM设计框架"><a href="#MVVM设计框架" class="headerlink" title="MVVM设计框架"></a><strong>MVVM设计框架</strong></h2><h3 id="base"><a href="#base" class="headerlink" title="base"></a><strong>base</strong></h3><p>一般这个包会放很多共用的基本封装代码(●’◡’●)</p>
<h3 id="network"><a href="#network" class="headerlink" title="network"></a><strong>network</strong></h3><h3 id="http网络封装"><a href="#http网络封装" class="headerlink" title="http网络封装"></a><strong>http网络封装</strong></h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:convert&#x27;</span>;</span><br><span class="line"><span class="comment">//需要导入dio网络包</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dio/dio.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> Success = <span class="keyword">void</span> <span class="built_in">Function</span>(<span class="built_in">dynamic</span> json);</span><br><span class="line"><span class="keyword">typedef</span> Fail = <span class="keyword">void</span> <span class="built_in">Function</span>(<span class="built_in">String</span> ?reason, <span class="built_in">int</span> ?code);</span><br><span class="line"><span class="keyword">typedef</span> After = <span class="keyword">void</span> <span class="built_in">Function</span>();</span><br><span class="line"><span class="keyword">var</span> headers = &#123;</span><br><span class="line">  <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Apifox/1.0.0 (&lt;https://www.apifox.cn&gt;)&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Http</span> </span>&#123;</span><br><span class="line">     <span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="code">    网络封装</span></span></span></span><br><span class="line"><span class="code"><span class="language-markdown"><span class="comment">    **/</span></span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">late</span> Dio _dio;</span><br><span class="line">  <span class="keyword">static</span> Http _instance = Http._internal();</span><br><span class="line">  <span class="keyword">factory</span> Http() &#123;</span><br><span class="line">    <span class="keyword">return</span> _instance;</span><br><span class="line">  &#125;</span><br><span class="line">  Http._internal() &#123;</span><br><span class="line">    _dio = createDio();</span><br><span class="line">  &#125;</span><br><span class="line">  Dio createDio() &#123;</span><br><span class="line">    <span class="keyword">var</span> dio = Dio(BaseOptions(</span><br><span class="line">      connectTimeout: <span class="built_in">Duration</span>(milliseconds: <span class="number">30000</span>),</span><br><span class="line">      receiveTimeout: <span class="built_in">Duration</span>(milliseconds: <span class="number">30000</span>),</span><br><span class="line">      sendTimeout: <span class="built_in">Duration</span>(milliseconds: <span class="number">30000</span>),</span><br><span class="line">      baseUrl: <span class="string">&quot;&lt;http://sosd.fzuhuahuo.cn:16052/api/v1&gt;&quot;</span>,</span><br><span class="line">      responseType: ResponseType.json,</span><br><span class="line">    ));</span><br><span class="line">    <span class="keyword">return</span> dio;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="language-markdown"><span class="code">/**</span></span></span></span><br><span class="line"><span class="code"><span class="language-markdown"><span class="comment">    接口代码</span></span></span></span><br><span class="line"><span class="code"><span class="language-markdown"><span class="comment">    **/</span></span></span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//登录接口</span></span><br><span class="line">    Future&lt;<span class="keyword">void</span>&gt; postLogin</span><br><span class="line">        <span class="comment">// url结尾</span></span><br><span class="line">        (<span class="built_in">String</span> endpoint, <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; data, &#123;Success? success, Fail? fail, After? after&#125;)</span><br><span class="line">    &#123;</span><br><span class="line">    _dio.post(<span class="comment">//post形式</span></span><br><span class="line">      endpoint,</span><br><span class="line">      data: jsonEncode(data),<span class="comment">//body形式传递参数</span></span><br><span class="line">      options: Options(headers: headers),</span><br><span class="line">    ).then((response) &#123;</span><br><span class="line">      <span class="keyword">if</span> (response.statusCode == <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (success != <span class="keyword">null</span>) &#123;</span><br><span class="line">          success(response.data);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (fail != <span class="keyword">null</span>) &#123;</span><br><span class="line">          fail(response.statusMessage, response.statusCode);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (after != <span class="keyword">null</span>) &#123;</span><br><span class="line">        after();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> Future.value();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取用户信息接口</span></span><br><span class="line">    Future&lt;<span class="keyword">void</span>&gt; getUser</span><br><span class="line">        (<span class="built_in">String</span> endpoint, <span class="built_in">int</span> id,&#123;Success? success, Fail? fail, After? after&#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">final</span> response = <span class="keyword">await</span> _dio.<span class="keyword">get</span>( <span class="comment">//get形式</span></span><br><span class="line">        endpoint,</span><br><span class="line">        queryParameters: &#123;<span class="string">&#x27;id&#x27;</span>: id&#125;, <span class="comment">// 使用 queryParameters 传递参数</span></span><br><span class="line">        options: Options(headers: headers),</span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">if</span> (response.statusCode == <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (success != <span class="keyword">null</span>) &#123;</span><br><span class="line">          success(response.data);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (fail != <span class="keyword">null</span>) &#123;</span><br><span class="line">          fail(response.statusMessage, response.statusCode);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (after != <span class="keyword">null</span>) &#123;</span><br><span class="line">        after();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="keyword">if</span> (fail != <span class="keyword">null</span>) &#123;</span><br><span class="line">        fail(e.toString(), <span class="number">500</span>); <span class="comment">// You can customize the status code here</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="base-viewmodel"><a href="#base-viewmodel" class="headerlink" title="base_viewmodel"></a><strong>base_viewmodel</strong></h3><p>后续写viewmodel代码直接继承这个baseviewmodel即可</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseViewModel</span> <span class="keyword">extends</span> <span class="title">ChangeNotifier</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="provider-widget"><a href="#provider-widget" class="headerlink" title="provider_widget"></a><strong>provider_widget</strong></h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/cupertino.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:provider/provider.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProviderWidget</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">ChangeNotifier</span>&gt; <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Widget <span class="built_in">Function</span>(BuildContext context, T value, Widget ?child) builder;</span><br><span class="line">  <span class="keyword">final</span> T model;<span class="comment">//需要传递viewmodel参数</span></span><br><span class="line">  <span class="keyword">final</span> Widget ?child;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">Function</span>(T) onReady;</span><br><span class="line"></span><br><span class="line">  ProviderWidget(&#123;</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.model,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.child,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.onReady,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.builder,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _ProviderWidgetState&lt;T&gt; createState() =&gt; _ProviderWidgetState&lt;T&gt;();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_ProviderWidgetState</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">ChangeNotifier</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">ProviderWidget</span>&lt;<span class="title">T</span>&gt;&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">if</span> (widget.onReady != <span class="keyword">null</span>) &#123;</span><br><span class="line">      widget.onReady(widget.model);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> ChangeNotifierProvider&lt;T&gt;(</span><br><span class="line">      create: (_) =&gt; widget.model,</span><br><span class="line">      child: Consumer&lt;T&gt;(</span><br><span class="line">        builder: widget.builder,</span><br><span class="line">        child: widget.child,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="common"><a href="#common" class="headerlink" title="common"></a><strong>common</strong></h3><h3 id="Urls"><a href="#Urls" class="headerlink" title="Urls"></a><strong>Urls</strong></h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment">存放Url结尾</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="strong">**/</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Urls</span></span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> login=<span class="string">&quot;/user/login&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> register=<span class="string">&quot;/user/register&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> update=<span class="string">&quot;/user/update&quot;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> getUser=<span class="string">&quot;/user/get/byId&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Routes"><a href="#Routes" class="headerlink" title="Routes"></a><strong>Routes</strong></h3><p>在这里，我们将写一个dart文件来管理路径，也就是说每一个页面的跳转都由这里控制(●’◡’●)</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/cupertino.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:userprogram/view/default_page.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:userprogram/view/home_page.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:userprogram/view/login_page.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:userprogram/view/register_page.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:userprogram/view/userUpdate_page.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../view/splash_page.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Routes</span></span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> splashRoute = <span class="string">&#x27;/&#x27;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> loginRoute = <span class="string">&#x27;/login&#x27;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> registerRoute = <span class="string">&#x27;/register&#x27;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> homeRoute = <span class="string">&#x27;/home&#x27;</span>;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">String</span> updateRoute = <span class="string">&#x27;/update&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> Route&lt;<span class="built_in">dynamic</span>&gt; generateRoute(RouteSettings settings) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (settings.name) &#123;</span><br><span class="line">      <span class="keyword">case</span> splashRoute:</span><br><span class="line">        <span class="keyword">return</span> MaterialPageRoute(builder: (_) =&gt; SplashPage());</span><br><span class="line">      <span class="keyword">case</span> loginRoute:</span><br><span class="line">        <span class="keyword">return</span> MaterialPageRoute(builder: (_) =&gt; LoginPage());</span><br><span class="line">      <span class="keyword">case</span> registerRoute:</span><br><span class="line">        <span class="keyword">return</span> MaterialPageRoute(builder: (_)=&gt;RegisterPage());</span><br><span class="line">      <span class="keyword">case</span> homeRoute:</span><br><span class="line">        <span class="keyword">return</span> MaterialPageRoute(builder: (_)=&gt;HomePage());</span><br><span class="line">      <span class="keyword">case</span> updateRoute:</span><br><span class="line">        <span class="keyword">return</span> MaterialPageRoute(builder: (_)=&gt;UserUpdatePage());</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> MaterialPageRoute(builder: (_) =&gt; DefaultPage());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>后续我们只需要用一行代码进行页面跳转(●’◡’●)</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.pushReplacementNamed(context, Routes.loginRoute<span class="comment"><span class="language-markdown">/<span class="strong">**选择你想跳转的路径**</span>/</span></span>);</span><br></pre></td></tr></table></figure>

<p>我们在main文件需要设置onGenerateRoute</p>
<p>也可以在这里写初始化页面initialRoute(●’◡’●)</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyApp</span>&gt;</span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context)&#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">      initialRoute: Routes.splashRoute,</span><br><span class="line">      onGenerateRoute: Routes.generateRoute,</span><br><span class="line"></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="model"><a href="#model" class="headerlink" title="model"></a><strong>model</strong></h3><h3 id="user-bean"><a href="#user-bean" class="headerlink" title="user_bean"></a><strong>user_bean</strong></h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment">除了fromJson方法基本由apifox生成</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet">*</span> <span class="emphasis">*/</span></span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">///<span class="language-markdown"><span class="emphasis">UserDto</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserRequest</span> </span>&#123;</span><br><span class="line">  UserRequest(&#123;</span><br><span class="line">    <span class="keyword">this</span>.password,</span><br><span class="line">    <span class="keyword">this</span>.phone,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String?</span> password;</span><br><span class="line">  <span class="built_in">String?</span> phone;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///<span class="language-markdown"><span class="emphasis">Result«User»</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Response</span> </span>&#123;</span><br><span class="line">  Response(&#123;</span><br><span class="line">    <span class="keyword">this</span>.code,</span><br><span class="line">    <span class="keyword">this</span>.data,</span><br><span class="line">    <span class="keyword">this</span>.msg,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">int?</span> code;</span><br><span class="line">  User? data;</span><br><span class="line">  <span class="built_in">String?</span> msg;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//fromJson方法 解析json格式</span></span><br><span class="line">  <span class="keyword">factory</span> Response.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; json) &#123;</span><br><span class="line">    <span class="keyword">return</span> Response(</span><br><span class="line">      code: json[<span class="string">&#x27;code&#x27;</span>],</span><br><span class="line">      data: json[<span class="string">&#x27;data&#x27;</span>] != <span class="keyword">null</span> ? User.fromJson(json[<span class="string">&#x27;data&#x27;</span>]) : <span class="keyword">null</span>,</span><br><span class="line">      msg: json[<span class="string">&#x27;msg&#x27;</span>],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///<span class="language-markdown"><span class="emphasis">User</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  User(&#123;</span><br><span class="line">    <span class="keyword">this</span>.balance,</span><br><span class="line">    <span class="keyword">this</span>.createdAt,</span><br><span class="line">    <span class="keyword">this</span>.headImg,</span><br><span class="line">    <span class="keyword">this</span>.id,</span><br><span class="line">    <span class="keyword">this</span>.nickName,</span><br><span class="line">    <span class="keyword">this</span>.password,</span><br><span class="line">    <span class="keyword">this</span>.phone,</span><br><span class="line">    <span class="keyword">this</span>.signature,</span><br><span class="line">    <span class="keyword">this</span>.updatedAt,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown"><span class="emphasis">余额</span></span></span></span><br><span class="line">  <span class="built_in">double?</span> balance;</span><br><span class="line">  <span class="built_in">String?</span> createdAt;</span><br><span class="line">  <span class="built_in">String?</span> headImg;</span><br><span class="line">  <span class="built_in">int?</span> id;</span><br><span class="line">  <span class="built_in">String?</span> nickName;</span><br><span class="line">  <span class="built_in">String?</span> password;</span><br><span class="line">  <span class="built_in">String?</span> phone;</span><br><span class="line"></span><br><span class="line">  <span class="comment">///<span class="language-markdown"><span class="emphasis">个性签名</span></span></span></span><br><span class="line">  <span class="built_in">String?</span> signature;</span><br><span class="line">  <span class="built_in">String?</span> updatedAt;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//fromJson方法 解析json格式</span></span><br><span class="line">  <span class="keyword">factory</span> User.fromJson(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; json) &#123;</span><br><span class="line">    <span class="keyword">return</span> User(</span><br><span class="line">      balance: json[<span class="string">&#x27;balance&#x27;</span>] ?? <span class="number">0.0</span>,</span><br><span class="line">      createdAt: json[<span class="string">&#x27;createdAt&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      headImg: json[<span class="string">&#x27;headImg&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      id: json[<span class="string">&#x27;id&#x27;</span>] ?? <span class="number">0</span>,</span><br><span class="line">      nickName: json[<span class="string">&#x27;nickName&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      password: json[<span class="string">&#x27;password&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      phone: json[<span class="string">&#x27;phone&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      signature: json[<span class="string">&#x27;signature&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      updatedAt: json[<span class="string">&#x27;updatedAt&#x27;</span>] ?? <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="viewmodel"><a href="#viewmodel" class="headerlink" title="viewmodel"></a><strong>viewmodel</strong></h3><h3 id="login-viewmodel"><a href="#login-viewmodel" class="headerlink" title="login_viewmodel"></a><strong>login_viewmodel</strong></h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:convert&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/cupertino.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_secure_storage/flutter_secure_storage.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:userprogram/base/base_viewmodel.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:userprogram/common/Routes.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:userprogram/common/Urls.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:userprogram/view/home_page.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../base/network/http.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../model/user_bean.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../model/update_bean.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginViewModel</span> <span class="keyword">extends</span> <span class="title">BaseViewModel</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment">  登录后缓存用户信息业务</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment">  <span class="strong">**/</span></span></span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">late</span> User currentUser = User(); <span class="comment">// 添加初始化值</span></span><br><span class="line">  <span class="keyword">late</span> <span class="built_in">String</span> token = <span class="string">&#x27;&#x27;</span>; <span class="comment">// 添加初始化值</span></span><br><span class="line">  <span class="keyword">final</span> storage = FlutterSecureStorage();</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="language-markdown"><span class="strong">/**</span></span></span></span><br><span class="line"><span class="language-markdown"><span class="comment">  当登录成功，判断用户是否登录变成true,下一次打开app就不用登录了</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment">  <span class="strong">**/</span></span></span></span><br><span class="line">  Future&lt;<span class="built_in">bool</span>&gt; isLoggedIn() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="built_in">String?</span> token = <span class="keyword">await</span> storage.read(key: <span class="string">&#x27;token&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> token != <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="language-markdown"><span class="strong">/**</span></span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet">   *</span> 登录方法</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment">   <span class="emphasis">*/</span></span></span></span><br><span class="line">  Future&lt;<span class="keyword">void</span>&gt; login(UserRequest userRequest) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; loginData = &#123;</span><br><span class="line">      <span class="string">&#x27;phone&#x27;</span>: userRequest.phone ?? <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;password&#x27;</span>: userRequest.password ?? <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">String</span> jsonLoginData = jsonEncode(loginData);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//传参给接口</span></span><br><span class="line">      Http().postLogin(</span><br><span class="line">        Urls.login,<span class="comment">//传url</span></span><br><span class="line">        loginData,<span class="comment">//传递data</span></span><br><span class="line">        success: (json) &#123;</span><br><span class="line">          Response response = Response.fromJson(json);</span><br><span class="line">          User userData = response.data!;</span><br><span class="line">          currentUser = userData;</span><br><span class="line">          <span class="comment">// 检查token是否在response.data中</span></span><br><span class="line">          <span class="keyword">if</span> (response.data != <span class="keyword">null</span> &amp;&amp; response.data!.id!= <span class="keyword">null</span>) &#123;</span><br><span class="line">            token = response.data!.id.toString();</span><br><span class="line">             <span class="comment">//将后端返回的信息缓存</span></span><br><span class="line">            saveUserDataLocally(currentUser, token);</span><br><span class="line">            notifyListeners();</span><br><span class="line">            debugPrint(<span class="string">&#x27;Logged in as <span class="subst">$&#123;currentUser.nickName&#125;</span>&#x27;</span>);</span><br><span class="line">            debugPrint(<span class="string">&#x27;Token: <span class="subst">$token</span>&#x27;</span>);</span><br><span class="line"></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 如果需要，处理token为null的情况</span></span><br><span class="line">            debugPrint(<span class="string">&#x27;Token is null&#x27;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        fail: (reason, statusCode) &#123;</span><br><span class="line">          debugPrint(<span class="string">&#x27;Login failed: <span class="subst">$reason</span>&#x27;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        after: () &#123;</span><br><span class="line">          <span class="comment">// 在登录之后需要执行的操作，可留空</span></span><br><span class="line">        &#125;,</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="language-markdown"><span class="emphasis">/*</span>*</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="code">    存储方法</span></span></span></span><br><span class="line"><span class="code"><span class="language-markdown"><span class="comment">    **/</span></span></span></span><br><span class="line">  <span class="keyword">void</span> saveUserDataLocally(User user, <span class="built_in">String</span> token) &#123;</span><br><span class="line">    storage.write(key: <span class="string">&#x27;token&#x27;</span>, value: token);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据您的User类的数据结构，存储用户相关信息</span></span><br><span class="line">    <span class="comment">// 例如：storage.write(key: &#x27;username&#x27;, value: user.user</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="language-markdown"><span class="code">/**</span></span></span></span><br><span class="line"><span class="code"><span class="language-markdown"><span class="comment">    登出方法</span></span></span></span><br><span class="line"><span class="code"><span class="language-markdown"><span class="comment">    **/</span></span></span></span><br><span class="line">  Future&lt;<span class="keyword">void</span>&gt; logout() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> storage.delete(key: <span class="string">&#x27;token&#x27;</span>);</span><br><span class="line">    <span class="comment">// 根据具体的User类数据结构，清除其他用户信息如用户名等</span></span><br><span class="line">    <span class="comment">// await storage.delete(key: &#x27;username&#x27;);</span></span><br><span class="line">    <span class="comment">// 这里可以添加其他退出登录时需要执行的操作</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="language-markdown"><span class="code">/**</span></span></span></span><br><span class="line"><span class="code"><span class="language-markdown"><span class="comment"> * 更新</span></span></span></span><br><span class="line"><span class="code"><span class="language-markdown"><span class="comment"> */</span></span></span></span><br><span class="line">  Future&lt;<span class="keyword">void</span>&gt; update(UpRequest user) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; updateData = &#123;</span><br><span class="line">      <span class="string">&#x27;id&#x27;</span>: <span class="number">21</span>,</span><br><span class="line">      <span class="string">&#x27;nickName&#x27;</span>: user.nickName,</span><br><span class="line">      <span class="string">&#x27;phone&#x27;</span>: user.phone,</span><br><span class="line">      <span class="string">&#x27;headImage&#x27;</span>:user.headImg</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    Http().postUpdate(</span><br><span class="line">      Urls.update,</span><br><span class="line">      updateData,</span><br><span class="line">      success: (json) &#123;</span><br><span class="line">        UpResponse response = UpResponse.fromJson(json);</span><br><span class="line">        <span class="keyword">if</span> (response.code==<span class="number">200</span>) &#123;</span><br><span class="line">          <span class="comment">// 更新用户数据成功</span></span><br><span class="line">          debugPrint(<span class="string">&#x27; updated successfully&#x27;</span>);</span><br><span class="line">          notifyListeners();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 更新用户数据失败</span></span><br><span class="line">          debugPrint(<span class="string">&#x27;Failed to update profile: <span class="subst">$&#123;response.msg&#125;</span>&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      fail: (reason, statusCode) &#123;</span><br><span class="line">        debugPrint(<span class="string">&#x27;Profile update failed: <span class="subst">$reason</span>&#x27;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      after: () &#123;</span><br><span class="line">        <span class="comment">// 在更新资料之后可能需要执行的操作，可留空</span></span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="view"><a href="#view" class="headerlink" title="view"></a><strong>view</strong></h3><p>既然是使用mvvm框架，我们可以用前面写的provider_widget来进行一个view和viewmodel之间的连接</p>
<p>当然，flutter也有自带的provider，可以根据需要选择</p>
<h3 id="home-page"><a href="#home-page" class="headerlink" title="home_page"></a><strong>home_page</strong></h3><p>这是一个获得用户数据的界面代码示例</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> ProviderWidget&lt;GetUserViewMode&gt;(</span><br><span class="line">      model: GetUserViewMode(), <span class="comment">// 实例化你的ViewModel</span></span><br><span class="line">      onReady: (model) <span class="keyword">async</span> &#123;</span><br><span class="line">        <span class="built_in">String?</span> id = <span class="keyword">await</span> loginViewModel.storage.read(key: <span class="string">&#x27;token&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (id != <span class="keyword">null</span>) &#123;</span><br><span class="line">          <span class="built_in">int?</span> userId = <span class="built_in">int</span>.tryParse(id);</span><br><span class="line">          <span class="keyword">if</span> (userId != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">await</span> model.getUser(userId); <span class="comment">// Make sure to await for the getUser method</span></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 处理无法将id解析为整数的情况</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Error: Unable to parse id to integer&#x27;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 处理id为null的情况</span></span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&#x27;Error: id is null&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      builder: (context, model, child) &#123;</span><br><span class="line">        <span class="keyword">return</span> Scaffold(</span><br><span class="line">          body: ListView(</span><br><span class="line">            children: [</span><br><span class="line">              ListTile(</span><br><span class="line">                contentPadding: EdgeInsets.all(<span class="number">8.0</span>),</span><br><span class="line">                leading: CircleAvatar(</span><br><span class="line">                  radius: <span class="number">60</span>,</span><br><span class="line">                  backgroundImage: model.getuser.headImg!= <span class="keyword">null</span></span><br><span class="line">                      ? Image.network(model.getuser.headImg <span class="keyword">as</span> <span class="built_in">String</span>).image</span><br><span class="line">                      : AssetImage(<span class="string">&#x27;lib/assert/profile.png&#x27;</span>),</span><br><span class="line"></span><br><span class="line">                ),</span><br><span class="line">                title: Column(</span><br><span class="line">                  crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">                  children: [</span><br><span class="line">                    Text(model.getuser.nickName ?? <span class="string">&#x27;创作家0001&#x27;</span>, style: TextStyle(fontSize: <span class="number">24</span>)),</span><br><span class="line">                    ElevatedButton(</span><br><span class="line">                      onPressed: () &#123;</span><br><span class="line">                        <span class="comment">// 点击编辑资料按钮触发的操作</span></span><br><span class="line">                        Navigator.pushReplacementNamed(context, Routes.updateRoute);</span><br><span class="line">                      &#125;,</span><br><span class="line">                      style: ButtonStyle(</span><br><span class="line">                        minimumSize: MaterialStateProperty.all(Size(<span class="number">100</span>, <span class="number">30</span>)),</span><br><span class="line">                      ),</span><br><span class="line">                      child: Text(<span class="string">&#x27;编辑资料&#x27;</span>, style: TextStyle(fontSize: <span class="number">12</span>)),</span><br><span class="line">                    ),</span><br><span class="line">                  ],</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              _buildListItem(Icons.person, <span class="string">&#x27;个人主页&#x27;</span>, () &#123;</span><br><span class="line">                <span class="comment">// 点击跳转到个人主页</span></span><br><span class="line">                <span class="comment">// <span class="doctag">TODO:</span> 添加跳转逻辑</span></span><br><span class="line">              &#125;),</span><br><span class="line">              _buildListItem(Icons.shopping_cart, <span class="string">&#x27;订单&#x27;</span>, () &#123;</span><br><span class="line">                <span class="comment">// 点击跳转到订单页面</span></span><br><span class="line">                <span class="comment">// <span class="doctag">TODO:</span> 添加跳转逻辑</span></span><br><span class="line">              &#125;),</span><br><span class="line">              _buildListItem(Icons.collections, <span class="string">&#x27;藏品管理&#x27;</span>, () &#123;</span><br><span class="line">                <span class="comment">// 点击跳转到藏品管理页面</span></span><br><span class="line">                <span class="comment">// <span class="doctag">TODO:</span> 添加跳转逻辑</span></span><br><span class="line">              &#125;),</span><br><span class="line">              _buildListItem(Icons.favorite, <span class="string">&#x27;收藏&#x27;</span>, () &#123;</span><br><span class="line">                <span class="comment">// 点击跳转到收藏页面</span></span><br><span class="line">                <span class="comment">// <span class="doctag">TODO:</span> 添加跳转逻辑</span></span><br><span class="line">              &#125;),</span><br><span class="line">              _buildListItem(Icons.comment, <span class="string">&#x27;获得的评论&#x27;</span>, () &#123;</span><br><span class="line">                <span class="comment">// 点击跳转到获得的评论页面</span></span><br><span class="line">                <span class="comment">// <span class="doctag">TODO:</span> 添加跳转逻辑</span></span><br><span class="line">              &#125;),</span><br><span class="line">              _buildListItem(Icons.thumb_up, <span class="string">&#x27;点赞&#x27;</span>, () &#123;</span><br><span class="line">                <span class="comment">// 点击跳转到点赞页面</span></span><br><span class="line">                <span class="comment">// <span class="doctag">TODO:</span> 添加跳转逻辑</span></span><br><span class="line">              &#125;),</span><br><span class="line">              _buildListItem(Icons.thumb_up, <span class="string">&#x27;登出&#x27;</span>, () &#123;</span><br><span class="line"></span><br><span class="line">                loginViewModel.logout();</span><br><span class="line">                Navigator.pushReplacementNamed(context, Routes.loginRoute);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Navigator.push(</span></span><br><span class="line">                <span class="comment">//   context,</span></span><br><span class="line">                <span class="comment">//   MaterialPageRoute(</span></span><br><span class="line">                <span class="comment">//     builder: (context) =&gt; UserUpdatePage(user: model.getuser),</span></span><br><span class="line">                <span class="comment">//   ),</span></span><br><span class="line">                <span class="comment">// );</span></span><br><span class="line"></span><br><span class="line">              &#125;),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">      &#125;, child: Container(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="splash-page"><a href="#splash-page" class="headerlink" title="splash_page"></a><strong>splash_page</strong></h3><p>接下来我们写一个splash的页面</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:userprogram/viewmodel/login_viewmodel.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../common/Routes.dart&#x27;</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SplashPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _SplashPageState createState() =&gt; _SplashPageState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SplashPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SplashPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">double</span> _opacity = <span class="number">0.0</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    checkLoginStatus();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关于splash页面的主要业务逻辑，就是判断是否登录，如果登录了就跳转首页，如果没登陆就跳转登录(●&#x27;◡&#x27;●)</span></span><br><span class="line">  <span class="keyword">void</span> checkLoginStatus() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> viewModel = LoginViewModel();</span><br><span class="line">    <span class="built_in">bool</span> isLoggedIn = <span class="keyword">await</span> viewModel.isLoggedIn();</span><br><span class="line"></span><br><span class="line">    Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">1</span>), () &#123;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _opacity = <span class="number">1.0</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">3</span>), () &#123;</span><br><span class="line">      <span class="keyword">if</span>(isLoggedIn)&#123;</span><br><span class="line">        Navigator.pushReplacementNamed(context, Routes.homeRoute);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Navigator.pushReplacementNamed(context, Routes.loginRoute);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      body: Container(</span><br><span class="line">        color: Colors.white,</span><br><span class="line">        child: Center(</span><br><span class="line">          child: AnimatedOpacity(</span><br><span class="line">            duration: <span class="built_in">Duration</span>(seconds: <span class="number">2</span>),</span><br><span class="line">            opacity: _opacity,</span><br><span class="line">            child: Text(</span><br><span class="line">              <span class="string">&#x27;Artify+&#x27;</span>,</span><br><span class="line">              style: TextStyle(</span><br><span class="line">                fontSize: <span class="number">30.0</span>,</span><br><span class="line">                fontFamily: <span class="string">&#x27;Roboto&#x27;</span>,</span><br><span class="line">                fontWeight: FontWeight.bold,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="拍照上传"><a href="#拍照上传" class="headerlink" title="拍照上传"></a><strong>拍照上传</strong></h2><h3 id="photo-page"><a href="#photo-page" class="headerlink" title="photo_page"></a><strong>photo_page</strong></h3><p>这是一个实现像微信朋友圈一样的页面代码</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:io&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:animated_program/photo_viewmodel.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:provider/provider.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PhotoPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _PhotoPageState createState() =&gt; _PhotoPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_PhotoPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">PhotoPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> ChangeNotifierProvider(</span><br><span class="line">      create: (context) =&gt; PhotoViewModel(),</span><br><span class="line">      child: Scaffold(</span><br><span class="line">        appBar: AppBar(</span><br><span class="line">          title: Text(<span class="string">&#x27;拍照上传照片&#x27;</span>),</span><br><span class="line">        ),</span><br><span class="line">        body: Consumer&lt;PhotoViewModel&gt;(</span><br><span class="line">          builder: (context, model, child) &#123;</span><br><span class="line">            <span class="keyword">return</span> Center(</span><br><span class="line">              child: Column(</span><br><span class="line">                mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">                children: &lt;Widget&gt;[</span><br><span class="line">                  Expanded(</span><br><span class="line">                    child: ListView.builder(</span><br><span class="line">                      itemCount: model.images.length,</span><br><span class="line">                      itemBuilder: (context, index) &#123;</span><br><span class="line">                        <span class="keyword">return</span> Container(</span><br><span class="line">                          padding: EdgeInsets.all(<span class="number">8.0</span>),</span><br><span class="line">                          child: Image.file(File(model.images[index].path)),</span><br><span class="line">                        );</span><br><span class="line">                      &#125;,</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                  SizedBox(height: <span class="number">20</span>),</span><br><span class="line">                  ElevatedButton(</span><br><span class="line">                    onPressed: () &#123;</span><br><span class="line">                      model.pickImage();</span><br><span class="line">                    &#125;,</span><br><span class="line">                    child: Text(<span class="string">&#x27;拍照上传&#x27;</span>),</span><br><span class="line">                  ),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">            );</span><br><span class="line">          &#125;,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="photo-viewmodel"><a href="#photo-viewmodel" class="headerlink" title="photo_viewmodel"></a><strong>photo_viewmodel</strong></h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/cupertino.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:image_picker/image_picker.dart&#x27;</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PhotoViewModel</span> <span class="title">with</span> <span class="title">ChangeNotifier</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> ImagePicker _picker = ImagePicker();</span><br><span class="line">  PickedFile? _image;</span><br><span class="line">  <span class="built_in">List</span>&lt;PickedFile&gt; _images = [];<span class="comment">//创建一个列表，放拍照传的照片</span></span><br><span class="line">  PickedFile? <span class="keyword">get</span> image =&gt; _image;</span><br><span class="line">  <span class="built_in">List</span>&lt;PickedFile&gt; <span class="keyword">get</span> images =&gt; _images;</span><br><span class="line"></span><br><span class="line">  Future&lt;<span class="keyword">void</span>&gt; pickImage() <span class="keyword">async</span> &#123;</span><br><span class="line">    XFile? xFile = <span class="keyword">await</span> _picker.pickImage(source: ImageSource.camera);</span><br><span class="line">    <span class="keyword">if</span> (xFile != <span class="keyword">null</span>) &#123;</span><br><span class="line">      _image = PickedFile(xFile.path);</span><br><span class="line">      _images.add(_image!); <span class="comment">// 添加新图片到图片列表</span></span><br><span class="line">      notifyListeners();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Future&lt;<span class="keyword">void</span>&gt; uploadImage() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">// Implement image upload functionality here</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.notion.so/35384dcf2eaf42359cc633aa1697e077?pvs=21">动画学习</a></p>

    </div>

    
        <hr class="fhr">
        <div id="vcomments"></div>
    
</div>
    <div class="footer" id="footer">
    <p><h4>Copyright © 2020 | Author: eniregnat_juy | Theme By <a class="theme-author" target="_blank" rel="noopener" href="https://github.com/Xunzhuo/hexo-theme-coder" style="font-size:14px; color: #969696">Coder</a></h4>
    
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <span id="busuanzi_container_site_pv">Page Views: <span id="busuanzi_value_site_pv"></span></span>
        <span class="post-meta-divider">|</span>
        <span id="busuanzi_container_site_uv">Unique Visitors: <span id="busuanzi_value_site_uv"></span></span>
    
    <label class="el-switch el-switch-blue el-switch-sm" style="vertical-align: sub;">
        <input type="checkbox" name="switch" id="update_style">
        <span class="el-switch-style"></span>
    </label>

    <!--         <script type="text/javascript">
    var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
    document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
    </script> -->
</p>
</div>

<input type="hidden" id="web_style" value="black">
<input type="hidden" id="valine_appid" value="">
<input type="hidden" id="valine_appKey" value="">

<script src="/libs/jquery.min.js"></script>


<script src="/libs/highlight/highlight.pack.js"></script>

<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>

<script src="/js/js.js"></script>

<style type="text/css">
.v * {
color: #698fca;
}
.v .vlist .vcard .vhead .vsys {
color: #3a3e4a;
}
.v .vlist .vcard .vh .vmeta .vat {
color: #638fd5;
}
.v .vlist .vcard .vhead .vnick {
color: #6ba1ff;
}
.v a {
color: #8696b1;
}
.v .vlist .vcard .vhead .vnick:hover {
color: #669bfc;
}
</style>
    <script type="text/javascript" color="173,174,173" opacity='1' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
</body>
</html>
